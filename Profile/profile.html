<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css">
    <link rel="stylesheet" href="profile.css">
</head>

<body>
    <div class="header">
        <div class="headline">
            <h2>Welcome Harshika!</h2>
            <p>You can update your personal information, view your stats, and more.</p>
        </div>
        <a href="/panel.5/panel.html">
            <i class="fa-solid fa-right-from-bracket logout-icon"></i>
        </a>
    </div>

    <div class="main">

        <div class="one">
            <div class="personal-info">
                <div class="upload card">
                    <h3>Profile Picture</h3>
                    <div class="pfp-container">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%23706fd3'/%3E%3Ctext x='50' y='55' text-anchor='middle' fill='white' font-size='20' font-family='Arial'%3EH%3C/text%3E%3C/svg%3E" alt="Profile Picture" class="pfp" id="profileImage">
                        <div class="pfp-overlay">
                            <i class="fas fa-camera"></i>
                            <span>Change Photo</span>
                        </div>
                    </div>
                    <form id="uploadForm" enctype="multipart/form-data">
                        <input type="file" id="fileInput" name="profile_picture" accept="image/*" style="display: none;">
                        <button type="button" id="selectFileBtn" class="upload-btn">
                            <i class="fas fa-upload"></i> Select New Photo
                        </button>
                        <button type="submit" id="uploadBtn" class="upload-btn" style="display: none;">
                            <i class="fas fa-check"></i> Upload Photo
                        </button>
                        <button type="button" id="cancelBtn" class="cancel-btn" style="display: none;">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </form>
                    <div id="uploadStatus" class="upload-status"></div>
                </div>
                <div class="updates">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="text-center">Contact Information</h3>
                        </div>
                        <div class="card-body">
                            <form class="row g-3 needs-validation" id="contactForm" novalidate>
                                <div class="col-md-6">
                                    <label for="userName" class="form-label">Name</label>
                                    <input type="text" class="form-control" id="userName"
                                        placeholder="Enter Your Name" required>
                                    <div class="invalid-feedback">Please provide a valid name.</div>
                                </div>
                                <br>
                                <div class="col-md-6">
                                    <label for="userPhone" class="form-label">Mobile Number</label>
                                    <input type="tel" class="form-control" id="userPhone" placeholder="+91"
                                        pattern="[+]?[0-9]{10,14}" required>
                                    <div class="invalid-feedback">Please provide a valid phone number.</div>
                                </div>
                                <br>
                                <div class="col-md-6">
                                    <label for="userEmail" class="form-label">Email-id</label>
                                    <input type="email" class="form-control" id="userEmail"
                                        placeholder="Enter Your Email Address" required>
                                    <div class="invalid-feedback">Please provide a valid email address.</div>
                                </div>
                                <br>
                                <div class="col-12 mt-4">
                                    <button class="btn btn-primary" type="submit">
                                        <i class="fas fa-save"></i> Submit form
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="two">
            <div class="stats card">
                <p>This Month's Stats</p>
                <div class="stats-grid">
                    <div class="stat-item">
                        <h3>Tasks Completed <i class="fas fa-check-circle"></i></h3>
                        <p>15</p>
                    </div>
                    <div class="stat-item">
                        <h3>Hours Worked <i class="fas fa-clock"></i></h3>
                        <p>120</p>
                    </div>
                    <div class="stat-item">
                        <h3>Projects Triggered<i class="fas fa-folder-open"></i></h3>
                        <p>5</p>
                    </div>
                </div>

                <div class="chart-container" style="position: relative; height:250px; width:100%;">
                    <canvas id="myChart"></canvas>
                </div>
            </div>

            <!-- Enhanced Study Tracker Card -->
            <div class="card study-tracker-card">
                <h3 class="study-tracker-title">üìÖ Daily Study Tracker</h3>
                
                <div class="heatmap-container">
                    <div class="months-labels" id="monthsLabels"></div>
                    
                    <div class="heatmap-grid">
                        <div class="weekdays">
                            <div class="weekday-label">Mon</div>
                            <div class="weekday-label"></div>
                            <div class="weekday-label">Wed</div>
                            <div class="weekday-label"></div>
                            <div class="weekday-label">Fri</div>
                            <div class="weekday-label"></div>
                            <div class="weekday-label">Sun</div>
                        </div>
                        <div class="days-grid" id="daysGrid"></div>
                    </div>

                    <div class="legend-container">
                        <span>Less</span>
                        <div class="legend-scale">
                            <div class="legend-cell level-0"></div>
                            <div class="legend-cell level-1"></div>
                            <div class="legend-cell level-2"></div>
                            <div class="legend-cell level-3"></div>
                            <div class="legend-cell level-4"></div>
                        </div>
                        <span>More</span>
                    </div>

                    <div class="streak-info">
                        <div class="streak-stat">
                            <span>üî•</span>
                            <span>Current Streak: <strong id="currentStreak">5 days</strong></span>
                        </div>
                        <div class="streak-stat">
                            <span>‚ö°</span>
                            <span>Longest Streak: <strong id="longestStreak">12 days</strong></span>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="three">
            <div class="personality-tag card">
                <h3>Personality Tags</h3>
                <p class="tag">üåô Night Owl</p>
                <p class="tag">‚òÄÔ∏è Early Riser</p>
                <p class="tag">üëÄ Visual Learner</p>
                <p class="tag">üß† Analytical Thinker</p>
                <p class="tag">üéß Audio Learner</p>
                <p class="tag">üöÄ Fast Executor</p>
                <p class="tag">üí° Creative Thinker</p>
            </div>

            <div class="recent-activity card">
                <h3><span class="icon">üïí</span> Recent Activity</h3>
                <ul>
                    <li>‚úÖ Completed task: Implemented new feature</li>
                    <li>üõ†Ô∏è Fixed bugs in login flow</li>
                    <li>üîç Reviewed pull request by Alex</li>
                    <li>üë• Participated in team sync-up</li>
                    <li>üßπ Cleaned up unused code</li>
                    <li>üöÄ Deployed latest version</li>
                </ul>
            </div>

            <div class="chart-row">
                <canvas id="myChart1" width="250" height="250"></canvas>
                <div id="legend-container"></div>
            </div>

        </div>

    </div>

    <!-- Tooltip element for study tracker -->
    <div id="tooltip" class="tooltip"></div>

    <!-- Loading overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Processing...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="profile.js"></script>
</body>

</html>